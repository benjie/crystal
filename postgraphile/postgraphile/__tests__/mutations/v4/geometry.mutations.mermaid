%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf12{{"__InputStaticLeaf[12∈0]"}}:::plan
    __InputStaticLeaf13{{"__InputStaticLeaf[13∈0]"}}:::plan
    __InputStaticLeaf16{{"__InputStaticLeaf[16∈0]"}}:::plan
    __InputStaticLeaf17{{"__InputStaticLeaf[17∈0]"}}:::plan
    __InputStaticLeaf19{{"__InputStaticLeaf[19∈0]"}}:::plan
    __InputStaticLeaf20{{"__InputStaticLeaf[20∈0]"}}:::plan
    __InputStaticLeaf23{{"__InputStaticLeaf[23∈0]"}}:::plan
    __InputStaticLeaf24{{"__InputStaticLeaf[24∈0]"}}:::plan
    __InputStaticLeaf26{{"__InputStaticLeaf[26∈0]"}}:::plan
    __InputStaticLeaf27{{"__InputStaticLeaf[27∈0]"}}:::plan
    __InputStaticLeaf30{{"__InputStaticLeaf[30∈0]"}}:::plan
    __InputStaticLeaf31{{"__InputStaticLeaf[31∈0]"}}:::plan
    __InputStaticLeaf33{{"__InputStaticLeaf[33∈0]"}}:::plan
    __InputStaticLeaf34{{"__InputStaticLeaf[34∈0]"}}:::plan
    __InputStaticLeaf38{{"__InputStaticLeaf[38∈0]"}}:::plan
    __InputStaticLeaf39{{"__InputStaticLeaf[39∈0]"}}:::plan
    __InputStaticLeaf41{{"__InputStaticLeaf[41∈0]"}}:::plan
    __InputStaticLeaf42{{"__InputStaticLeaf[42∈0]"}}:::plan
    __InputStaticLeaf44{{"__InputStaticLeaf[44∈0]"}}:::plan
    __InputStaticLeaf45{{"__InputStaticLeaf[45∈0]"}}:::plan
    __InputStaticLeaf47{{"__InputStaticLeaf[47∈0]"}}:::plan
    __InputStaticLeaf48{{"__InputStaticLeaf[48∈0]"}}:::plan
    __InputStaticLeaf49{{"__InputStaticLeaf[49∈0]"}}:::plan
    __InputStaticLeaf53{{"__InputStaticLeaf[53∈0]"}}:::plan
    __InputStaticLeaf54{{"__InputStaticLeaf[54∈0]"}}:::plan
    __InputStaticLeaf56{{"__InputStaticLeaf[56∈0]"}}:::plan
    __InputStaticLeaf57{{"__InputStaticLeaf[57∈0]"}}:::plan
    __InputStaticLeaf59{{"__InputStaticLeaf[59∈0]"}}:::plan
    __InputStaticLeaf60{{"__InputStaticLeaf[60∈0]"}}:::plan
    __InputStaticLeaf62{{"__InputStaticLeaf[62∈0]"}}:::plan
    __InputStaticLeaf63{{"__InputStaticLeaf[63∈0]"}}:::plan
    __InputStaticLeaf64{{"__InputStaticLeaf[64∈0]"}}:::plan
    __InputStaticLeaf68{{"__InputStaticLeaf[68∈0]"}}:::plan
    __InputStaticLeaf69{{"__InputStaticLeaf[69∈0]"}}:::plan
    __InputStaticLeaf71{{"__InputStaticLeaf[71∈0]"}}:::plan
    __InputStaticLeaf72{{"__InputStaticLeaf[72∈0]"}}:::plan
    __InputStaticLeaf74{{"__InputStaticLeaf[74∈0]"}}:::plan
    __InputStaticLeaf75{{"__InputStaticLeaf[75∈0]"}}:::plan
    __InputStaticLeaf77{{"__InputStaticLeaf[77∈0]"}}:::plan
    __InputStaticLeaf78{{"__InputStaticLeaf[78∈0]"}}:::plan
    __InputStaticLeaf81{{"__InputStaticLeaf[81∈0]"}}:::plan
    __InputStaticLeaf82{{"__InputStaticLeaf[82∈0]"}}:::plan
    __InputStaticLeaf83{{"__InputStaticLeaf[83∈0]"}}:::plan
    Access85{{"Access[85∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access86{{"Access[86∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Object87{{"Object[87∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Object89{{"Object[89∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object90{{"Object[90∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object91{{"Object[91∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object92{{"Object[92∈0]<br />ᐸ{a,b}ᐳ"}}:::plan
    Object93{{"Object[93∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object94{{"Object[94∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object95{{"Object[95∈0]<br />ᐸ{a,b}ᐳ"}}:::plan
    Object96{{"Object[96∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object97{{"Object[97∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object98{{"Object[98∈0]<br />ᐸ{a,b}ᐳ"}}:::plan
    Object99{{"Object[99∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object100{{"Object[100∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object101{{"Object[101∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object102{{"Object[102∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    List103{{"List[103∈0]<br />ᐸ99,100,101,102ᐳ"}}:::plan
    Object104{{"Object[104∈0]<br />ᐸ{points,isOpen}ᐳ"}}:::plan
    Object105{{"Object[105∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object106{{"Object[106∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object107{{"Object[107∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object108{{"Object[108∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    List109{{"List[109∈0]<br />ᐸ105,106,107,108ᐳ"}}:::plan
    Object110{{"Object[110∈0]<br />ᐸ{points,isOpen}ᐳ"}}:::plan
    Object111{{"Object[111∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object112{{"Object[112∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object113{{"Object[113∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object114{{"Object[114∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    List115{{"List[115∈0]<br />ᐸ111,112,113,114ᐳ"}}:::plan
    Object116{{"Object[116∈0]<br />ᐸ{points}ᐳ"}}:::plan
    Object117{{"Object[117∈0]<br />ᐸ{x,y}ᐳ"}}:::plan
    Object118{{"Object[118∈0]<br />ᐸ{center,radius}ᐳ"}}:::plan
    PgInsert84[["PgInsert[84∈1]"]]:::sideeffectplan
    Object88{{"Object[88∈1]<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression119{{"PgClassExpression[119∈3]<br />ᐸ__geom__.”id”ᐳ"}}:::plan
    PgClassExpression120{{"PgClassExpression[120∈3]<br />ᐸ__geom__.”point”ᐳ"}}:::plan
    PgClassExpression123{{"PgClassExpression[123∈3]<br />ᐸ__geom__.”line”ᐳ"}}:::plan
    PgClassExpression130{{"PgClassExpression[130∈3]<br />ᐸ__geom__.”lseg”ᐳ"}}:::plan
    PgClassExpression137{{"PgClassExpression[137∈3]<br />ᐸ__geom__.”box”ᐳ"}}:::plan
    PgClassExpression144{{"PgClassExpression[144∈3]<br />ᐸ__geom__.”open_path”ᐳ"}}:::plan
    Access146{{"Access[146∈8]<br />ᐸ144.pointsᐳ"}}:::plan
    __Item147[/"__Item[147∈9]<br />ᐸ146ᐳ"\]:::itemplan
    PgClassExpression150{{"PgClassExpression[150∈3]<br />ᐸ__geom__.”closed_path”ᐳ"}}:::plan
    Access152{{"Access[152∈10]<br />ᐸ150.pointsᐳ"}}:::plan
    __Item153[/"__Item[153∈11]<br />ᐸ152ᐳ"\]:::itemplan
    PgClassExpression156{{"PgClassExpression[156∈3]<br />ᐸ__geom__.”polygon”ᐳ"}}:::plan
    Access157{{"Access[157∈12]<br />ᐸ156.pointsᐳ"}}:::plan
    __Item158[/"__Item[158∈13]<br />ᐸ157ᐳ"\]:::itemplan
    PgClassExpression161{{"PgClassExpression[161∈3]<br />ᐸ__geom__.”circle”ᐳ"}}:::plan

    %% plan dependencies
    __Value3 --> Access85
    __Value3 --> Access86
    Access85 & Access86 --> Object87
    __InputStaticLeaf12 & __InputStaticLeaf13 --> Object89
    __InputStaticLeaf16 & __InputStaticLeaf17 --> Object90
    __InputStaticLeaf19 & __InputStaticLeaf20 --> Object91
    Object90 & Object91 --> Object92
    __InputStaticLeaf23 & __InputStaticLeaf24 --> Object93
    __InputStaticLeaf26 & __InputStaticLeaf27 --> Object94
    Object93 & Object94 --> Object95
    __InputStaticLeaf30 & __InputStaticLeaf31 --> Object96
    __InputStaticLeaf33 & __InputStaticLeaf34 --> Object97
    Object96 & Object97 --> Object98
    __InputStaticLeaf38 & __InputStaticLeaf39 --> Object99
    __InputStaticLeaf41 & __InputStaticLeaf42 --> Object100
    __InputStaticLeaf44 & __InputStaticLeaf45 --> Object101
    __InputStaticLeaf47 & __InputStaticLeaf48 --> Object102
    Object99 & Object100 & Object101 & Object102 --> List103
    List103 & __InputStaticLeaf49 --> Object104
    __InputStaticLeaf53 & __InputStaticLeaf54 --> Object105
    __InputStaticLeaf56 & __InputStaticLeaf57 --> Object106
    __InputStaticLeaf59 & __InputStaticLeaf60 --> Object107
    __InputStaticLeaf62 & __InputStaticLeaf63 --> Object108
    Object105 & Object106 & Object107 & Object108 --> List109
    List109 & __InputStaticLeaf64 --> Object110
    __InputStaticLeaf68 & __InputStaticLeaf69 --> Object111
    __InputStaticLeaf71 & __InputStaticLeaf72 --> Object112
    __InputStaticLeaf74 & __InputStaticLeaf75 --> Object113
    __InputStaticLeaf77 & __InputStaticLeaf78 --> Object114
    Object111 & Object112 & Object113 & Object114 --> List115
    List115 --> Object116
    __InputStaticLeaf81 & __InputStaticLeaf82 --> Object117
    Object117 & __InputStaticLeaf83 --> Object118
    Object87 & Object89 & Object92 & Object95 & Object98 & Object104 & Object110 & Object116 & Object118 --> PgInsert84
    PgInsert84 --> Object88
    PgInsert84 --> PgClassExpression119
    PgInsert84 --> PgClassExpression120
    PgInsert84 --> PgClassExpression123
    PgInsert84 --> PgClassExpression130
    PgInsert84 --> PgClassExpression137
    PgInsert84 --> PgClassExpression144
    PgClassExpression144 --> Access146
    Access146 ==> __Item147
    PgInsert84 --> PgClassExpression150
    PgClassExpression150 --> Access152
    Access152 ==> __Item153
    PgInsert84 --> PgClassExpression156
    PgClassExpression156 --> Access157
    Access157 ==> __Item158
    PgInsert84 --> PgClassExpression161

    subgraph "Buckets for mutations/v4/geometry.mutations"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf12,__InputStaticLeaf13,__InputStaticLeaf16,__InputStaticLeaf17,__InputStaticLeaf19,__InputStaticLeaf20,__InputStaticLeaf23,__InputStaticLeaf24,__InputStaticLeaf26,__InputStaticLeaf27,__InputStaticLeaf30,__InputStaticLeaf31,__InputStaticLeaf33,__InputStaticLeaf34,__InputStaticLeaf38,__InputStaticLeaf39,__InputStaticLeaf41,__InputStaticLeaf42,__InputStaticLeaf44,__InputStaticLeaf45,__InputStaticLeaf47,__InputStaticLeaf48,__InputStaticLeaf49,__InputStaticLeaf53,__InputStaticLeaf54,__InputStaticLeaf56,__InputStaticLeaf57,__InputStaticLeaf59,__InputStaticLeaf60,__InputStaticLeaf62,__InputStaticLeaf63,__InputStaticLeaf64,__InputStaticLeaf68,__InputStaticLeaf69,__InputStaticLeaf71,__InputStaticLeaf72,__InputStaticLeaf74,__InputStaticLeaf75,__InputStaticLeaf77,__InputStaticLeaf78,__InputStaticLeaf81,__InputStaticLeaf82,__InputStaticLeaf83,Access85,Access86,Object87,Object89,Object90,Object91,Object92,Object93,Object94,Object95,Object96,Object97,Object98,Object99,Object100,Object101,Object102,List103,Object104,Object105,Object106,Object107,Object108,List109,Object110,Object111,Object112,Object113,Object114,List115,Object116,Object117,Object118 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 87, 89, 92, 95, 98, 104, 110, 116, 118<br /><br />1: PgInsert[84]<br />2: <br />ᐳ: Object[88]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsert84,Object88 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 88, 84<br /><br />ROOT Object{1}ᐸ{result}ᐳ[88]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 84<br /><br />ROOT PgInsert{1}[84]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression119,PgClassExpression120,PgClassExpression123,PgClassExpression130,PgClassExpression137,PgClassExpression144,PgClassExpression150,PgClassExpression156,PgClassExpression161 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 120<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”point”ᐳ[120]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4 bucket4
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 123<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”line”ᐳ[123]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 130<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”lseg”ᐳ[130]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 137<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”box”ᐳ[137]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 144<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”open_path”ᐳ[144]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,Access146 bucket8
    Bucket9("Bucket 9 (listItem)<br />ROOT __Item{9}ᐸ146ᐳ[147]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item147 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 150<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”closed_path”ᐳ[150]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,Access152 bucket10
    Bucket11("Bucket 11 (listItem)<br />ROOT __Item{11}ᐸ152ᐳ[153]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,__Item153 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 156<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”polygon”ᐳ[156]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,Access157 bucket12
    Bucket13("Bucket 13 (listItem)<br />ROOT __Item{13}ᐸ157ᐳ[158]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item158 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 161<br /><br />ROOT PgClassExpression{3}ᐸ__geom__.”circle”ᐳ[161]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14 bucket14
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket10 & Bucket12 & Bucket14
    Bucket8 --> Bucket9
    Bucket10 --> Bucket11
    Bucket12 --> Bucket13
    end
