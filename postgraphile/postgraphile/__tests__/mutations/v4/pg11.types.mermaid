%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf9{{"__InputStaticLeaf[9∈0]"}}:::plan
    __InputStaticLeaf12{{"__InputStaticLeaf[12∈0]"}}:::plan
    __InputStaticLeaf13{{"__InputStaticLeaf[13∈0]"}}:::plan
    __InputStaticLeaf15{{"__InputStaticLeaf[15∈0]"}}:::plan
    __InputStaticLeaf16{{"__InputStaticLeaf[16∈0]"}}:::plan
    __InputStaticLeaf17{{"__InputStaticLeaf[17∈0]"}}:::plan
    __InputStaticLeaf19{{"__InputStaticLeaf[19∈0]"}}:::plan
    Access28{{"Access[28∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access29{{"Access[29∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Object30{{"Object[30∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    List32{{"List[32∈0]<br />ᐸ15,16,17ᐳ"}}:::plan
    Object33{{"Object[33∈0]<br />ᐸ{a}ᐳ"}}:::plan
    PgUpdate27[["PgUpdate[27∈1]"]]:::sideeffectplan
    Object31{{"Object[31∈1]<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression34{{"PgClassExpression[34∈3]<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgClassExpression35{{"PgClassExpression[35∈3]<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    PgClassExpression36{{"PgClassExpression[36∈3]<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    PgClassExpression37{{"PgClassExpression[37∈3]<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    __Item38[/"__Item[38∈4]<br />ᐸ37ᐳ"\]:::itemplan
    PgClassExpression39{{"PgClassExpression[39∈3]<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    PgSelect40[["PgSelect[40∈3]<br />ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ"]]:::plan
    First44{{"First[44∈3]"}}:::plan
    PgSelectSingle45{{"PgSelectSingle[45∈3]<br />ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ"}}:::plan
    PgClassExpression46{{"PgClassExpression[46∈5]<br />ᐸ__frmcdc_d...pe_1__.”a”ᐳ"}}:::plan
    PgClassExpression47{{"PgClassExpression[47∈5]<br />ᐸ__frmcdc_d...pe_1__.”b”ᐳ"}}:::plan
    PgClassExpression48{{"PgClassExpression[48∈5]<br />ᐸ__frmcdc_d...pe_1__.”c”ᐳ"}}:::plan
    PgClassExpression49{{"PgClassExpression[49∈5]<br />ᐸ__frmcdc_d...pe_1__.”d”ᐳ"}}:::plan
    PgClassExpression50{{"PgClassExpression[50∈5]<br />ᐸ__frmcdc_d...pe_1__.”e”ᐳ"}}:::plan
    PgClassExpression51{{"PgClassExpression[51∈5]<br />ᐸ__frmcdc_d...pe_1__.”f”ᐳ"}}:::plan
    PgClassExpression52{{"PgClassExpression[52∈5]<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    __InputStaticLeaf57{{"__InputStaticLeaf[57∈0]"}}:::plan
    __InputStaticLeaf58{{"__InputStaticLeaf[58∈0]"}}:::plan
    __InputStaticLeaf60{{"__InputStaticLeaf[60∈0]"}}:::plan
    __InputStaticLeaf61{{"__InputStaticLeaf[61∈0]"}}:::plan
    __InputStaticLeaf62{{"__InputStaticLeaf[62∈0]"}}:::plan
    __InputStaticLeaf64{{"__InputStaticLeaf[64∈0]"}}:::plan
    List77{{"List[77∈0]<br />ᐸ60,61,62ᐳ"}}:::plan
    Object78{{"Object[78∈0]<br />ᐸ{a}ᐳ"}}:::plan
    PgInsert72[["PgInsert[72∈6]"]]:::sideeffectplan
    Object76{{"Object[76∈6]<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression79{{"PgClassExpression[79∈8]<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgClassExpression80{{"PgClassExpression[80∈8]<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    PgClassExpression81{{"PgClassExpression[81∈8]<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    PgClassExpression82{{"PgClassExpression[82∈8]<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    __Item83[/"__Item[83∈9]<br />ᐸ82ᐳ"\]:::itemplan
    PgClassExpression84{{"PgClassExpression[84∈8]<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    PgSelect85[["PgSelect[85∈8]<br />ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ"]]:::plan
    First89{{"First[89∈8]"}}:::plan
    PgSelectSingle90{{"PgSelectSingle[90∈8]<br />ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ"}}:::plan
    PgClassExpression91{{"PgClassExpression[91∈10]<br />ᐸ__frmcdc_d...pe_1__.”a”ᐳ"}}:::plan
    PgClassExpression92{{"PgClassExpression[92∈10]<br />ᐸ__frmcdc_d...pe_1__.”b”ᐳ"}}:::plan
    PgClassExpression93{{"PgClassExpression[93∈10]<br />ᐸ__frmcdc_d...pe_1__.”c”ᐳ"}}:::plan
    PgClassExpression94{{"PgClassExpression[94∈10]<br />ᐸ__frmcdc_d...pe_1__.”d”ᐳ"}}:::plan
    PgClassExpression95{{"PgClassExpression[95∈10]<br />ᐸ__frmcdc_d...pe_1__.”e”ᐳ"}}:::plan
    PgClassExpression96{{"PgClassExpression[96∈10]<br />ᐸ__frmcdc_d...pe_1__.”f”ᐳ"}}:::plan
    PgClassExpression97{{"PgClassExpression[97∈10]<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan

    %% plan dependencies
    __Value3 --> Access28
    __Value3 --> Access29
    Access28 & Access29 --> Object30
    __InputStaticLeaf15 & __InputStaticLeaf16 & __InputStaticLeaf17 --> List32
    __InputStaticLeaf19 --> Object33
    Object30 & __InputStaticLeaf9 & __InputStaticLeaf12 & __InputStaticLeaf13 & List32 & Object33 --> PgUpdate27
    PgUpdate27 --> Object31
    PgUpdate27 --> PgClassExpression34
    PgUpdate27 --> PgClassExpression35
    PgUpdate27 --> PgClassExpression36
    PgUpdate27 --> PgClassExpression37
    PgClassExpression37 ==> __Item38
    PgUpdate27 --> PgClassExpression39
    Object30 & PgClassExpression39 --> PgSelect40
    PgSelect40 --> First44
    First44 --> PgSelectSingle45
    PgSelectSingle45 --> PgClassExpression46
    PgSelectSingle45 --> PgClassExpression47
    PgSelectSingle45 --> PgClassExpression48
    PgSelectSingle45 --> PgClassExpression49
    PgSelectSingle45 --> PgClassExpression50
    PgSelectSingle45 --> PgClassExpression51
    PgSelectSingle45 --> PgClassExpression52
    __InputStaticLeaf60 & __InputStaticLeaf61 & __InputStaticLeaf62 --> List77
    __InputStaticLeaf64 --> Object78
    Object30 & __InputStaticLeaf57 & __InputStaticLeaf58 & List77 & Object78 --> PgInsert72
    PgInsert72 --> Object76
    PgInsert72 --> PgClassExpression79
    PgInsert72 --> PgClassExpression80
    PgInsert72 --> PgClassExpression81
    PgInsert72 --> PgClassExpression82
    PgClassExpression82 ==> __Item83
    PgInsert72 --> PgClassExpression84
    Object30 & PgClassExpression84 --> PgSelect85
    PgSelect85 --> First89
    First89 --> PgSelectSingle90
    PgSelectSingle90 --> PgClassExpression91
    PgSelectSingle90 --> PgClassExpression92
    PgSelectSingle90 --> PgClassExpression93
    PgSelectSingle90 --> PgClassExpression94
    PgSelectSingle90 --> PgClassExpression95
    PgSelectSingle90 --> PgClassExpression96
    PgSelectSingle90 --> PgClassExpression97

    subgraph "Buckets for mutations/v4/pg11.types"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf9,__InputStaticLeaf12,__InputStaticLeaf13,__InputStaticLeaf15,__InputStaticLeaf16,__InputStaticLeaf17,__InputStaticLeaf19,Access28,Access29,Object30,List32,Object33,__InputStaticLeaf57,__InputStaticLeaf58,__InputStaticLeaf60,__InputStaticLeaf61,__InputStaticLeaf62,__InputStaticLeaf64,List77,Object78 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 30, 9, 12, 13, 32, 33<br /><br />1: PgUpdate[27]<br />2: <br />ᐳ: Object[31]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdate27,Object31 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 31, 27, 30<br /><br />ROOT Object{1}ᐸ{result}ᐳ[31]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 27, 30<br /><br />ROOT PgUpdate{1}[27]<br />1: <br />ᐳ: 34, 35, 36, 37, 39<br />2: PgSelect[40]<br />ᐳ: First[44], PgSelectSingle[45]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression34,PgClassExpression35,PgClassExpression36,PgClassExpression37,PgClassExpression39,PgSelect40,First44,PgSelectSingle45 bucket3
    Bucket4("Bucket 4 (listItem)<br />ROOT __Item{4}ᐸ37ᐳ[38]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item38 bucket4
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 45<br /><br />ROOT PgSelectSingle{3}ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ[45]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression46,PgClassExpression47,PgClassExpression48,PgClassExpression49,PgClassExpression50,PgClassExpression51,PgClassExpression52 bucket5
    Bucket6("Bucket 6 (mutationField)<br />Deps: 30, 57, 58, 77, 78<br /><br />1: PgInsert[72]<br />2: <br />ᐳ: Object[76]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgInsert72,Object76 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 76, 72, 30<br /><br />ROOT Object{6}ᐸ{result}ᐳ[76]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 72, 30<br /><br />ROOT PgInsert{6}[72]<br />1: <br />ᐳ: 79, 80, 81, 82, 84<br />2: PgSelect[85]<br />ᐳ: First[89], PgSelectSingle[90]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression79,PgClassExpression80,PgClassExpression81,PgClassExpression82,PgClassExpression84,PgSelect85,First89,PgSelectSingle90 bucket8
    Bucket9("Bucket 9 (listItem)<br />ROOT __Item{9}ᐸ82ᐳ[83]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item83 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 90<br /><br />ROOT PgSelectSingle{8}ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ[90]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression91,PgClassExpression92,PgClassExpression93,PgClassExpression94,PgClassExpression95,PgClassExpression96,PgClassExpression97 bucket10
    Bucket0 --> Bucket1 & Bucket6
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5
    Bucket6 --> Bucket7
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9 & Bucket10
    end
