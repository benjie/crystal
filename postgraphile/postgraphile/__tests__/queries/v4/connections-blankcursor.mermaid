%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf7{{"__InputStaticLeaf[7∈0]"}}:::plan
    __InputStaticLeaf11{{"__InputStaticLeaf[11∈0]"}}:::plan
    Access17{{"Access[17∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access18{{"Access[18∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Object19{{"Object[19∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Lambda21{{"Lambda[21∈0]<br />ᐸparseCursorᐳ"}}:::plan
    Connection20{{"Connection[20∈0]<br />ᐸ16ᐳ"}}:::plan
    PgPageInfo22{{"PgPageInfo[22∈1]"}}:::plan
    PgValidateParsedCursor27["PgValidateParsedCursor[27∈1]"]:::plan
    Access28{{"Access[28∈1]<br />ᐸ21.1ᐳ"}}:::plan
    ToPg29["ToPg[29∈1]"]:::plan
    PgSelect23[["PgSelect[23∈1]<br />ᐸperson+1ᐳ"]]:::plan
    First24{{"First[24∈1]"}}:::plan
    PgSelectSingle25{{"PgSelectSingle[25∈1]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression30{{"PgClassExpression[30∈1]<br />ᐸ__person__.”id”ᐳ"}}:::plan
    List31{{"List[31∈1]<br />ᐸ30ᐳ"}}:::plan
    PgCursor26{{"PgCursor[26∈1]"}}:::plan
    Last33{{"Last[33∈1]"}}:::plan
    PgSelectSingle34{{"PgSelectSingle[34∈1]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression39{{"PgClassExpression[39∈1]<br />ᐸ__person__.”id”ᐳ"}}:::plan
    List40{{"List[40∈1]<br />ᐸ39ᐳ"}}:::plan
    PgCursor35{{"PgCursor[35∈1]"}}:::plan
    Lambda42{{"Lambda[42∈1]<br />ᐸlistHasMoreᐳ"}}:::plan
    Constant46{{"Constant[46∈1]"}}:::plan
    PgSelect47[["PgSelect[47∈1]<br />ᐸperson(aggregate)ᐳ"]]:::plan
    First48{{"First[48∈1]"}}:::plan
    PgSelectSingle49{{"PgSelectSingle[49∈1]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression50{{"PgClassExpression[50∈1]<br />ᐸcount(*)ᐳ"}}:::plan
    __Item55[/"__Item[55∈2]<br />ᐸ23ᐳ"\]:::itemplan
    PgSelectSingle56{{"PgSelectSingle[56∈2]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression58{{"PgClassExpression[58∈3]<br />ᐸ__person__.”id”ᐳ"}}:::plan
    List59{{"List[59∈3]<br />ᐸ58ᐳ"}}:::plan
    PgCursor57{{"PgCursor[57∈3]"}}:::plan
    PgClassExpression61{{"PgClassExpression[61∈3]<br />ᐸ__person__...full_name”ᐳ"}}:::plan
    PgClassExpression62{{"PgClassExpression[62∈3]<br />ᐸ__person__.”email”ᐳ"}}:::plan
    PgClassExpression63{{"PgClassExpression[63∈3]<br />ᐸ__person__.”config”ᐳ"}}:::plan
    PgClassExpression64{{"PgClassExpression[64∈3]<br />ᐸ__person__...n_from_ip”ᐳ"}}:::plan
    __InputStaticLeaf65{{"__InputStaticLeaf[65∈0]"}}:::plan
    __InputStaticLeaf69{{"__InputStaticLeaf[69∈0]"}}:::plan
    Lambda79{{"Lambda[79∈0]<br />ᐸparseCursorᐳ"}}:::plan
    Connection78{{"Connection[78∈0]<br />ᐸ74ᐳ"}}:::plan
    PgPageInfo80{{"PgPageInfo[80∈4]"}}:::plan
    PgValidateParsedCursor85["PgValidateParsedCursor[85∈4]"]:::plan
    Access86{{"Access[86∈4]<br />ᐸ79.1ᐳ"}}:::plan
    ToPg87["ToPg[87∈4]"]:::plan
    PgSelect81[["PgSelect[81∈4]<br />ᐸperson+1ᐳ"]]:::plan
    First82{{"First[82∈4]"}}:::plan
    PgSelectSingle83{{"PgSelectSingle[83∈4]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression88{{"PgClassExpression[88∈4]<br />ᐸ__person__.”id”ᐳ"}}:::plan
    List89{{"List[89∈4]<br />ᐸ88ᐳ"}}:::plan
    PgCursor84{{"PgCursor[84∈4]"}}:::plan
    Last91{{"Last[91∈4]"}}:::plan
    PgSelectSingle92{{"PgSelectSingle[92∈4]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression97{{"PgClassExpression[97∈4]<br />ᐸ__person__.”id”ᐳ"}}:::plan
    List98{{"List[98∈4]<br />ᐸ97ᐳ"}}:::plan
    PgCursor93{{"PgCursor[93∈4]"}}:::plan
    Lambda100{{"Lambda[100∈4]<br />ᐸlistHasMoreᐳ"}}:::plan
    Constant104{{"Constant[104∈4]"}}:::plan
    PgSelect105[["PgSelect[105∈4]<br />ᐸperson(aggregate)ᐳ"]]:::plan
    First106{{"First[106∈4]"}}:::plan
    PgSelectSingle107{{"PgSelectSingle[107∈4]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression108{{"PgClassExpression[108∈4]<br />ᐸcount(*)ᐳ"}}:::plan
    __Item113[/"__Item[113∈5]<br />ᐸ81ᐳ"\]:::itemplan
    PgSelectSingle114{{"PgSelectSingle[114∈5]<br />ᐸpersonᐳ"}}:::plan
    PgClassExpression116{{"PgClassExpression[116∈6]<br />ᐸ__person__.”id”ᐳ"}}:::plan
    List117{{"List[117∈6]<br />ᐸ116ᐳ"}}:::plan
    PgCursor115{{"PgCursor[115∈6]"}}:::plan
    PgClassExpression119{{"PgClassExpression[119∈6]<br />ᐸ__person__...full_name”ᐳ"}}:::plan
    PgClassExpression120{{"PgClassExpression[120∈6]<br />ᐸ__person__.”email”ᐳ"}}:::plan
    PgClassExpression121{{"PgClassExpression[121∈6]<br />ᐸ__person__.”config”ᐳ"}}:::plan
    PgClassExpression122{{"PgClassExpression[122∈6]<br />ᐸ__person__...n_from_ip”ᐳ"}}:::plan

    %% plan dependencies
    __Value3 --> Access17
    __Value3 --> Access18
    Access17 & Access18 --> Object19
    __InputStaticLeaf11 --> Lambda21
    __InputStaticLeaf7 & Lambda21 --> Connection20
    Lambda21 --> PgValidateParsedCursor27
    Lambda21 --> Access28
    Access28 --> ToPg29
    Object19 & Connection20 & Lambda21 & PgValidateParsedCursor27 & ToPg29 --> PgSelect23
    PgSelect23 --> First24
    First24 --> PgSelectSingle25
    PgSelectSingle25 --> PgClassExpression30
    PgClassExpression30 --> List31
    List31 --> PgCursor26
    PgSelect23 --> Last33
    Last33 --> PgSelectSingle34
    PgSelectSingle34 --> PgClassExpression39
    PgClassExpression39 --> List40
    List40 --> PgCursor35
    PgSelect23 --> Lambda42
    Object19 & Connection20 --> PgSelect47
    PgSelect47 --> First48
    First48 --> PgSelectSingle49
    PgSelectSingle49 --> PgClassExpression50
    PgSelect23 ==> __Item55
    __Item55 --> PgSelectSingle56
    PgSelectSingle56 --> PgClassExpression58
    PgClassExpression58 --> List59
    List59 --> PgCursor57
    PgSelectSingle56 --> PgClassExpression61
    PgSelectSingle56 --> PgClassExpression62
    PgSelectSingle56 --> PgClassExpression63
    PgSelectSingle56 --> PgClassExpression64
    __InputStaticLeaf69 --> Lambda79
    __InputStaticLeaf65 & Lambda79 --> Connection78
    Lambda79 --> PgValidateParsedCursor85
    Lambda79 --> Access86
    Access86 --> ToPg87
    Object19 & Connection78 & Lambda79 & PgValidateParsedCursor85 & ToPg87 --> PgSelect81
    PgSelect81 --> First82
    First82 --> PgSelectSingle83
    PgSelectSingle83 --> PgClassExpression88
    PgClassExpression88 --> List89
    List89 --> PgCursor84
    PgSelect81 --> Last91
    Last91 --> PgSelectSingle92
    PgSelectSingle92 --> PgClassExpression97
    PgClassExpression97 --> List98
    List98 --> PgCursor93
    PgSelect81 --> Lambda100
    Object19 & Connection78 --> PgSelect105
    PgSelect105 --> First106
    First106 --> PgSelectSingle107
    PgSelectSingle107 --> PgClassExpression108
    PgSelect81 ==> __Item113
    __Item113 --> PgSelectSingle114
    PgSelectSingle114 --> PgClassExpression116
    PgClassExpression116 --> List117
    List117 --> PgCursor115
    PgSelectSingle114 --> PgClassExpression119
    PgSelectSingle114 --> PgClassExpression120
    PgSelectSingle114 --> PgClassExpression121
    PgSelectSingle114 --> PgClassExpression122

    subgraph "Buckets for queries/v4/connections-blankcursor"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf7,__InputStaticLeaf11,Access17,Access18,Object19,Connection20,Lambda21,__InputStaticLeaf65,__InputStaticLeaf69,Connection78,Lambda79 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 19, 20, 21<br /><br />ROOT Connectionᐸ16ᐳ[20]<br />1: 27, 47<br />ᐳ: 22, 28, 46, 48, 49, 50<br />2: ToPg[29]<br />3: PgSelect[23]<br />ᐳ: 24, 25, 30, 31, 33, 34, 39, 40, 42, 26, 35"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgPageInfo22,PgSelect23,First24,PgSelectSingle25,PgCursor26,PgValidateParsedCursor27,Access28,ToPg29,PgClassExpression30,List31,Last33,PgSelectSingle34,PgCursor35,PgClassExpression39,List40,Lambda42,Constant46,PgSelect47,First48,PgSelectSingle49,PgClassExpression50 bucket1
    Bucket2("Bucket 2 (listItem)<br />ROOT __Item{2}ᐸ23ᐳ[55]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item55,PgSelectSingle56 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 56<br /><br />ROOT PgSelectSingle{2}ᐸpersonᐳ[56]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgCursor57,PgClassExpression58,List59,PgClassExpression61,PgClassExpression62,PgClassExpression63,PgClassExpression64 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 19, 78, 79<br /><br />ROOT Connectionᐸ74ᐳ[78]<br />1: 85, 105<br />ᐳ: 80, 86, 104, 106, 107, 108<br />2: ToPg[87]<br />3: PgSelect[81]<br />ᐳ: 82, 83, 88, 89, 91, 92, 97, 98, 100, 84, 93"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgPageInfo80,PgSelect81,First82,PgSelectSingle83,PgCursor84,PgValidateParsedCursor85,Access86,ToPg87,PgClassExpression88,List89,Last91,PgSelectSingle92,PgCursor93,PgClassExpression97,List98,Lambda100,Constant104,PgSelect105,First106,PgSelectSingle107,PgClassExpression108 bucket4
    Bucket5("Bucket 5 (listItem)<br />ROOT __Item{5}ᐸ81ᐳ[113]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item113,PgSelectSingle114 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 114<br /><br />ROOT PgSelectSingle{5}ᐸpersonᐳ[114]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgCursor115,PgClassExpression116,List117,PgClassExpression119,PgClassExpression120,PgClassExpression121,PgClassExpression122 bucket6
    Bucket0 --> Bucket1 & Bucket4
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    end
