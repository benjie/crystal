graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define plans
    __Value0["__Value[0∈0]"]:::plan
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    Access37["Access[37∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access38["Access[38∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object39["Object[39∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    Connection40["Connection[40∈0]<br />ᐸ36ᐳ"]:::plan
    PgSelect41[["PgSelect[41∈0]<br />ᐸtypesᐳ"]]:::plan
    __Item42>"__Item[42∈1]<br />ᐸ41ᐳ"]:::itemplan
    PgSelectSingle43["PgSelectSingle[43∈1]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression44["PgClassExpression[44∈1]<br />ᐸ__types__.”id”ᐳ"]:::plan
    PgClassExpression45["PgClassExpression[45∈1]<br />ᐸ__types__.”regrole”ᐳ"]:::plan
    PgClassExpression46["PgClassExpression[46∈1]<br />ᐸ__types__....namespace”ᐳ"]:::plan
    PgClassExpression47["PgClassExpression[47∈1]<br />ᐸ__types__....ay_domain”ᐳ"]:::plan
    __Item48>"__Item[48∈2]<br />ᐸ47ᐳ"]:::itemplan
    Map102["Map[102∈1]<br />ᐸ43:{”0”:4,”1”:5,”2”:6,”3”:7,”4”:8,”5”:9,”6”:10,”7”:11}ᐳ"]:::plan
    PgSelectSingle55["PgSelectSingle[55∈1]<br />ᐸTemporarySource1ᐳ"]:::plan
    PgClassExpression56["PgClassExpression[56∈1]<br />ᐸ__temporar...rce1__.”a”ᐳ"]:::plan
    PgClassExpression57["PgClassExpression[57∈1]<br />ᐸ__temporar...rce1__.”b”ᐳ"]:::plan
    PgClassExpression58["PgClassExpression[58∈1]<br />ᐸ__temporar...rce1__.”c”ᐳ"]:::plan
    PgClassExpression59["PgClassExpression[59∈1]<br />ᐸ__temporar...rce1__.”d”ᐳ"]:::plan
    PgClassExpression60["PgClassExpression[60∈1]<br />ᐸ__temporar...rce1__.”e”ᐳ"]:::plan
    PgClassExpression61["PgClassExpression[61∈1]<br />ᐸ__temporar...rce1__.”f”ᐳ"]:::plan
    PgClassExpression62["PgClassExpression[62∈1]<br />ᐸ__temporar....”foo_bar”ᐳ"]:::plan
    PgSelect83[["PgSelect[83∈0]<br />ᐸtypesᐳ"]]:::plan
    First84["First[84∈0]"]:::plan
    PgSelectSingle85["PgSelectSingle[85∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression86["PgClassExpression[86∈0]<br />ᐸcount(*)ᐳ"]:::plan
    PgPageInfo87["PgPageInfo[87∈0]"]:::plan
    Constant88["Constant[88∈0]"]:::plan
    Constant89["Constant[89∈0]"]:::plan
    First91["First[91∈0]"]:::plan
    PgSelectSingle92["PgSelectSingle[92∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression94["PgClassExpression[94∈0]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List95["List[95∈0]<br />ᐸ94ᐳ"]:::plan
    PgCursor93["PgCursor[93∈0]"]:::plan
    Last97["Last[97∈0]"]:::plan
    PgSelectSingle98["PgSelectSingle[98∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression100["PgClassExpression[100∈0]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List101["List[101∈0]<br />ᐸ100ᐳ"]:::plan
    PgCursor99["PgCursor[99∈0]"]:::plan

    %% plan dependencies
    __Value3 --> Access37
    __Value3 --> Access38
    Access37 & Access38 --> Object39
    Object39 & Connection40 --> PgSelect41
    PgSelect41 ==> __Item42
    __Item42 --> PgSelectSingle43
    PgSelectSingle43 --> PgClassExpression44
    PgSelectSingle43 --> PgClassExpression45
    PgSelectSingle43 --> PgClassExpression46
    PgSelectSingle43 --> PgClassExpression47
    PgClassExpression47 ==> __Item48
    PgSelectSingle43 --> Map102
    Map102 --> PgSelectSingle55
    PgSelectSingle55 --> PgClassExpression56
    PgSelectSingle55 --> PgClassExpression57
    PgSelectSingle55 --> PgClassExpression58
    PgSelectSingle55 --> PgClassExpression59
    PgSelectSingle55 --> PgClassExpression60
    PgSelectSingle55 --> PgClassExpression61
    PgSelectSingle55 --> PgClassExpression62
    Object39 & Connection40 --> PgSelect83
    PgSelect83 --> First84
    First84 --> PgSelectSingle85
    PgSelectSingle85 --> PgClassExpression86
    PgSelect41 --> First91
    First91 --> PgSelectSingle92
    PgSelectSingle92 --> PgClassExpression94
    PgClassExpression94 --> List95
    List95 --> PgCursor93
    PgSelect41 --> Last97
    Last97 --> PgSelectSingle98
    PgSelectSingle98 --> PgClassExpression100
    PgClassExpression100 --> List101
    List101 --> PgCursor99

    %% plan-to-path relationships
    P0["~"]
    __Value0 -.-> P0
    P40["ᐳallTypes"]
    Connection40 -.-> P40
    P41["ᐳa…sᐳnodes<br />ᐳa…sᐳedges"]
    PgSelect41 -.-> P41
    P43["ᐳa…sᐳnodes[]<br />ᐳa…sᐳedges[]<br />ᐳa…sᐳe…]ᐳnode"]
    PgSelectSingle43 -.-> P43
    P44["ᐳa…sᐳn…]ᐳid<br />ᐳa…sᐳe…]ᐳnodeᐳid"]
    PgClassExpression44 -.-> P44
    P45["ᐳa…sᐳn…]ᐳregrole<br />ᐳa…sᐳe…]ᐳnodeᐳregrole"]
    PgClassExpression45 -.-> P45
    P46["ᐳa…sᐳn…]ᐳregnamespace<br />ᐳa…sᐳe…]ᐳnodeᐳregnamespace"]
    PgClassExpression46 -.-> P46
    P47["ᐳa…sᐳn…]ᐳbigintDomainArrayDomain<br />ᐳa…sᐳe…]ᐳnodeᐳbigintDomainArrayDomain"]
    PgClassExpression47 -.-> P47
    P48["ᐳa…sᐳn…]ᐳbigintDomainArrayDomain[]<br />ᐳa…sᐳe…]ᐳnodeᐳbigintDomainArrayDomain[]"]
    __Item48 -.-> P48
    P55["ᐳa…sᐳn…]ᐳdomainConstrainedCompoundType<br />ᐳa…sᐳe…]ᐳnodeᐳdomainConstrainedCompoundType"]
    PgSelectSingle55 -.-> P55
    P56["ᐳa…sᐳn…]ᐳd…eᐳa<br />ᐳa…sᐳe…]ᐳnodeᐳd…eᐳa"]
    PgClassExpression56 -.-> P56
    P57["ᐳa…sᐳn…]ᐳd…eᐳb<br />ᐳa…sᐳe…]ᐳnodeᐳd…eᐳb"]
    PgClassExpression57 -.-> P57
    P58["ᐳa…sᐳn…]ᐳd…eᐳc<br />ᐳa…sᐳe…]ᐳnodeᐳd…eᐳc"]
    PgClassExpression58 -.-> P58
    P59["ᐳa…sᐳn…]ᐳd…eᐳd<br />ᐳa…sᐳe…]ᐳnodeᐳd…eᐳd"]
    PgClassExpression59 -.-> P59
    P60["ᐳa…sᐳn…]ᐳd…eᐳe<br />ᐳa…sᐳe…]ᐳnodeᐳd…eᐳe"]
    PgClassExpression60 -.-> P60
    P61["ᐳa…sᐳn…]ᐳd…eᐳf<br />ᐳa…sᐳe…]ᐳnodeᐳd…eᐳf"]
    PgClassExpression61 -.-> P61
    P62["ᐳa…sᐳn…]ᐳd…eᐳfooBar<br />ᐳa…sᐳe…]ᐳnodeᐳd…eᐳfooBar"]
    PgClassExpression62 -.-> P62
    P86["ᐳa…sᐳtotalCount"]
    PgClassExpression86 -.-> P86
    P87["ᐳa…sᐳpageInfo"]
    PgPageInfo87 -.-> P87
    P88["ᐳa…sᐳp…oᐳhasNextPage"]
    Constant88 -.-> P88
    P89["ᐳa…sᐳp…oᐳhasPreviousPage"]
    Constant89 -.-> P89
    P93["ᐳa…sᐳp…oᐳstartCursor"]
    PgCursor93 -.-> P93
    P99["ᐳa…sᐳp…oᐳendCursor"]
    PgCursor99 -.-> P99

    subgraph "Buckets for queries/v4/pg11.types"
    Bucket0("Bucket 0 (root)<br />~<br />⠀ROOT ᐸ-O- 0<br />⠀⠀allTypes ᐸ-O- 40<br />⠀⠀⠀allTypes.nodes ᐸ-A- 41<br />⠀⠀⠀allTypes.edges ᐸ-A- 41<br />⠀⠀⠀allTypes.totalCount ᐸ-L- 86<br />⠀⠀⠀allTypes.pageInfo ᐸ-O- 87<br />⠀⠀⠀⠀allTypes.pageInfo.hasNextPage ᐸ-L- 88<br />⠀⠀⠀⠀allTypes.pageInfo.hasPreviousPage ᐸ-L- 89<br />⠀⠀⠀⠀allTypes.pageInfo.startCursor ᐸ-L- 93<br />⠀⠀⠀⠀allTypes.pageInfo.endCursor ᐸ-L- 99"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,Access37,Access38,Object39,Connection40,PgSelect41,PgSelect83,First84,PgSelectSingle85,PgClassExpression86,PgPageInfo87,Constant88,Constant89,First91,PgSelectSingle92,PgCursor93,PgClassExpression94,List95,Last97,PgSelectSingle98,PgCursor99,PgClassExpression100,List101 bucket0
    Bucket1("Bucket 1 (item42)<br />Deps: 41<br />~ᐳQuery.allTypesᐳTypesConnection.nodes[]<br />~ᐳQuery.allTypesᐳTypesConnection.edges[]<br />⠀ROOT ᐸ-O- 43<br />⠀⠀node ᐸ-O- 43<br />⠀⠀⠀node.id ᐸ-L- 44<br />⠀⠀⠀node.regrole ᐸ-L- 45<br />⠀⠀⠀node.regnamespace ᐸ-L- 46<br />⠀⠀⠀node.bigintDomainArrayDomain ᐸ-A- 47<br />⠀⠀⠀node.domainConstrainedCompoundType ᐸ-O- 55<br />⠀⠀⠀⠀node.domainConstrainedCompoundType.a ᐸ-L- 56<br />⠀⠀⠀⠀node.domainConstrainedCompoundType.b ᐸ-L- 57<br />⠀⠀⠀⠀node.domainConstrainedCompoundType.c ᐸ-L- 58<br />⠀⠀⠀⠀node.domainConstrainedCompoundType.d ᐸ-L- 59<br />⠀⠀⠀⠀node.domainConstrainedCompoundType.e ᐸ-L- 60<br />⠀⠀⠀⠀node.domainConstrainedCompoundType.f ᐸ-L- 61<br />⠀⠀⠀⠀node.domainConstrainedCompoundType.fooBar ᐸ-L- 62<br />⠀⠀id ᐸ-L- 44<br />⠀⠀regrole ᐸ-L- 45<br />⠀⠀regnamespace ᐸ-L- 46<br />⠀⠀bigintDomainArrayDomain ᐸ-A- 47<br />⠀⠀domainConstrainedCompoundType ᐸ-O- 55<br />⠀⠀⠀domainConstrainedCompoundType.a ᐸ-L- 56<br />⠀⠀⠀domainConstrainedCompoundType.b ᐸ-L- 57<br />⠀⠀⠀domainConstrainedCompoundType.c ᐸ-L- 58<br />⠀⠀⠀domainConstrainedCompoundType.d ᐸ-L- 59<br />⠀⠀⠀domainConstrainedCompoundType.e ᐸ-L- 60<br />⠀⠀⠀domainConstrainedCompoundType.f ᐸ-L- 61<br />⠀⠀⠀domainConstrainedCompoundType.fooBar ᐸ-L- 62"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item42,PgSelectSingle43,PgClassExpression44,PgClassExpression45,PgClassExpression46,PgClassExpression47,PgSelectSingle55,PgClassExpression56,PgClassExpression57,PgClassExpression58,PgClassExpression59,PgClassExpression60,PgClassExpression61,PgClassExpression62,Map102 bucket1
    Bucket2("Bucket 2 (item48)<br />Deps: 47<br />~ᐳQuery.allTypesᐳTypesConnection.nodes[]ᐳType.bigintDomainArrayDomain[]<br />~ᐳQuery.allTypesᐳTypesConnection.edges[]ᐳTypesEdge.nodeᐳType.bigintDomainArrayDomain[]<br />⠀ROOT ᐸ-L- 48"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item48 bucket2
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    end
