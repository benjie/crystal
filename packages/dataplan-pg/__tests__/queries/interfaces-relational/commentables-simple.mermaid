graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define plans
    __Value0["__Value[0∈0]"]:::plan
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    Access9["Access[9∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access10["Access[10∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object11["Object[11∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect8[["PgSelect[8∈0]<br />ᐸrelational_commentablesᐳ"]]:::plan
    __ListTransform12["__ListTransform[12∈0]<br />ᐸeach:8ᐳ"]:::plan
    __Item13>"__Item[13∈1]<br />ᐸ8ᐳ"]:::itemplan
    PgSelectSingle14["PgSelectSingle[14∈1]<br />ᐸrelational_commentablesᐳ"]:::plan
    __Item15>"__Item[15∈2]<br />ᐸ12ᐳ"]:::itemplan
    PgSelectSingle16["PgSelectSingle[16∈2]<br />ᐸrelational_commentablesᐳ"]:::plan
    PgClassExpression17["PgClassExpression[17∈2]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgPolymorphic18["PgPolymorphic[18∈2]"]:::plan
    Map114["Map[114∈2]<br />ᐸ16:{”0”:1,”1”:2,”2”:3,”3”:4}ᐳ"]:::plan
    PgSelectSingle25["PgSelectSingle[25∈3]<br />ᐸrelational_postsᐳ"]:::plan
    Map112["Map[112∈3]<br />ᐸ25:{”0”:0,”1”:1,”2”:2}ᐳ"]:::plan
    PgSelectSingle32["PgSelectSingle[32∈3]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression33["PgClassExpression[33∈3]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgClassExpression41["PgClassExpression[41∈3]<br />ᐸ__relation...__.”type2”ᐳ"]:::plan
    PgClassExpression49["PgClassExpression[49∈3]<br />ᐸ__relation...”position”ᐳ"]:::plan
    Map118["Map[118∈2]<br />ᐸ16:{”0”:5,”1”:6,”2”:7,”3”:8}ᐳ"]:::plan
    PgSelectSingle56["PgSelectSingle[56∈4]<br />ᐸrelational_checklistsᐳ"]:::plan
    Map116["Map[116∈4]<br />ᐸ56:{”0”:0,”1”:1,”2”:2}ᐳ"]:::plan
    PgSelectSingle63["PgSelectSingle[63∈4]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression64["PgClassExpression[64∈4]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgClassExpression72["PgClassExpression[72∈4]<br />ᐸ__relation...__.”type2”ᐳ"]:::plan
    PgClassExpression80["PgClassExpression[80∈4]<br />ᐸ__relation...”position”ᐳ"]:::plan
    Map122["Map[122∈2]<br />ᐸ16:{”0”:9,”1”:10,”2”:11,”3”:12}ᐳ"]:::plan
    PgSelectSingle87["PgSelectSingle[87∈5]<br />ᐸrelational_checklist_itemsᐳ"]:::plan
    Map120["Map[120∈5]<br />ᐸ87:{”0”:0,”1”:1,”2”:2}ᐳ"]:::plan
    PgSelectSingle94["PgSelectSingle[94∈5]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression95["PgClassExpression[95∈5]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgClassExpression103["PgClassExpression[103∈5]<br />ᐸ__relation...__.”type2”ᐳ"]:::plan
    PgClassExpression111["PgClassExpression[111∈5]<br />ᐸ__relation...”position”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access9
    __Value3 --> Access10
    Access9 & Access10 --> Object11
    Object11 --> PgSelect8
    PgSelect8 --> __ListTransform12
    PgSelectSingle14 -.-> __ListTransform12
    PgSelect8 -.-> __Item13
    __Item13 --> PgSelectSingle14
    __ListTransform12 ==> __Item15
    __Item15 --> PgSelectSingle16
    PgSelectSingle16 --> PgClassExpression17
    PgSelectSingle16 & PgClassExpression17 --> PgPolymorphic18
    PgSelectSingle16 --> Map114
    Map114 --> PgSelectSingle25
    PgSelectSingle25 --> Map112
    Map112 --> PgSelectSingle32
    PgSelectSingle32 --> PgClassExpression33
    PgSelectSingle32 --> PgClassExpression41
    PgSelectSingle32 --> PgClassExpression49
    PgSelectSingle16 --> Map118
    Map118 --> PgSelectSingle56
    PgSelectSingle56 --> Map116
    Map116 --> PgSelectSingle63
    PgSelectSingle63 --> PgClassExpression64
    PgSelectSingle63 --> PgClassExpression72
    PgSelectSingle63 --> PgClassExpression80
    PgSelectSingle16 --> Map122
    Map122 --> PgSelectSingle87
    PgSelectSingle87 --> Map120
    Map120 --> PgSelectSingle94
    PgSelectSingle94 --> PgClassExpression95
    PgSelectSingle94 --> PgClassExpression103
    PgSelectSingle94 --> PgClassExpression111

    %% plan-to-path relationships
    P0["~"]
    __Value0 -.-> P0
    P12["ᐳallRelationalCommentablesList"]
    __ListTransform12 -.-> P12
    P14["ᐳallRelationalCommentablesList@12[]"]
    PgSelectSingle14 -.-> P14
    P18["ᐳallRelationalCommentablesList[]"]
    PgPolymorphic18 -.-> P18
    P33["ᐳa…]ᐳtype"]
    PgClassExpression33 -.-> P33
    P41["ᐳa…]ᐳtype2"]
    PgClassExpression41 -.-> P41
    P49["ᐳa…]ᐳposition"]
    PgClassExpression49 -.-> P49
    P64["ᐳa…]ᐳtype"]
    PgClassExpression64 -.-> P64
    P72["ᐳa…]ᐳtype2"]
    PgClassExpression72 -.-> P72
    P80["ᐳa…]ᐳposition"]
    PgClassExpression80 -.-> P80
    P95["ᐳa…]ᐳtype"]
    PgClassExpression95 -.-> P95
    P103["ᐳa…]ᐳtype2"]
    PgClassExpression103 -.-> P103
    P111["ᐳa…]ᐳposition"]
    PgClassExpression111 -.-> P111

    subgraph "Buckets for queries/interfaces-relational/commentables-simple"
    Bucket0("Bucket 0 (root)<br />~<br />⠀ROOT ᐸ-O- 0<br />⠀⠀allRelationalCommentablesList ᐸ-A- 12"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,PgSelect8,Access9,Access10,Object11,__ListTransform12 bucket0
    Bucket1("Bucket 1 (item13)<br />Deps: 8"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item13,PgSelectSingle14 bucket1
    Bucket2("Bucket 2 (item15)<br />Deps: 12<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀ROOT ᐸ-O- 18"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item15,PgSelectSingle16,PgClassExpression17,PgPolymorphic18,Map114,Map118,Map122 bucket2
    Bucket3("Bucket 3 (polymorphic18[RelationalPost])<br />Deps: 114<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀⠀type ᐸ-L- 33<br />⠀⠀type2 ᐸ-L- 41<br />⠀⠀position ᐸ-L- 49"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgSelectSingle25,PgSelectSingle32,PgClassExpression33,PgClassExpression41,PgClassExpression49,Map112 bucket3
    Bucket4("Bucket 4 (polymorphic18[RelationalChecklist])<br />Deps: 118<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀⠀type ᐸ-L- 64<br />⠀⠀type2 ᐸ-L- 72<br />⠀⠀position ᐸ-L- 80"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelectSingle56,PgSelectSingle63,PgClassExpression64,PgClassExpression72,PgClassExpression80,Map116 bucket4
    Bucket5("Bucket 5 (polymorphic18[RelationalChecklistItem])<br />Deps: 122<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀⠀type ᐸ-L- 95<br />⠀⠀type2 ᐸ-L- 103<br />⠀⠀position ᐸ-L- 111"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelectSingle87,PgSelectSingle94,PgClassExpression95,PgClassExpression103,PgClassExpression111,Map120 bucket5
    Bucket0 --> Bucket1 & Bucket2
    Bucket2 --> Bucket3 & Bucket4 & Bucket5
    end
