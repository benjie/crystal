graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define plans
    __Value0["__Value[0∈0]"]:::plan
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    Access9["Access[9∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access10["Access[10∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object11["Object[11∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect8[["PgSelect[8∈0]<br />ᐸrelational_commentablesᐳ"]]:::plan
    __ListTransform12["__ListTransform[12∈0]<br />ᐸeach:8ᐳ"]:::plan
    __Item13>"__Item[13∈1]<br />ᐸ8ᐳ"]:::itemplan
    PgSelectSingle14["PgSelectSingle[14∈1]<br />ᐸrelational_commentablesᐳ"]:::plan
    __Item15>"__Item[15∈2]<br />ᐸ12ᐳ"]:::itemplan
    PgSelectSingle16["PgSelectSingle[16∈2]<br />ᐸrelational_commentablesᐳ"]:::plan
    PgClassExpression17["PgClassExpression[17∈2]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgPolymorphic18["PgPolymorphic[18∈2]"]:::plan
    PgClassExpression19["PgClassExpression[19∈2]<br />ᐸ__relation...les__.”id”ᐳ"]:::plan
    PgSelect20[["PgSelect[20∈2]<br />ᐸrelational_postsᐳ"]]:::plan
    First24["First[24∈2]"]:::plan
    PgSelectSingle25["PgSelectSingle[25∈3]<br />ᐸrelational_postsᐳ"]:::plan
    PgClassExpression26["PgClassExpression[26∈3]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    Map121["Map[121∈3]<br />ᐸ25:{”0”:0,”1”:1,”2”:2}ᐳ"]:::plan
    PgSelectSingle33["PgSelectSingle[33∈3]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression34["PgClassExpression[34∈3]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgClassExpression42["PgClassExpression[42∈3]<br />ᐸ__relation...__.”type2”ᐳ"]:::plan
    PgClassExpression50["PgClassExpression[50∈3]<br />ᐸ__relation...”position”ᐳ"]:::plan
    PgClassExpression51["PgClassExpression[51∈3]<br />ᐸ__relation...__.”title”ᐳ"]:::plan
    PgClassExpression52["PgClassExpression[52∈3]<br />ᐸ__relation...scription”ᐳ"]:::plan
    PgClassExpression53["PgClassExpression[53∈3]<br />ᐸ__relation...s__.”note”ᐳ"]:::plan
    PgSelect55[["PgSelect[55∈2]<br />ᐸrelational_checklistsᐳ"]]:::plan
    First59["First[59∈2]"]:::plan
    PgSelectSingle60["PgSelectSingle[60∈4]<br />ᐸrelational_checklistsᐳ"]:::plan
    PgClassExpression61["PgClassExpression[61∈4]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    Map123["Map[123∈4]<br />ᐸ60:{”0”:0,”1”:1,”2”:2}ᐳ"]:::plan
    PgSelectSingle68["PgSelectSingle[68∈4]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression69["PgClassExpression[69∈4]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgClassExpression77["PgClassExpression[77∈4]<br />ᐸ__relation...__.”type2”ᐳ"]:::plan
    PgClassExpression85["PgClassExpression[85∈4]<br />ᐸ__relation...”position”ᐳ"]:::plan
    PgClassExpression86["PgClassExpression[86∈4]<br />ᐸ__relation...__.”title”ᐳ"]:::plan
    PgSelect88[["PgSelect[88∈2]<br />ᐸrelational_checklist_itemsᐳ"]]:::plan
    First92["First[92∈2]"]:::plan
    PgSelectSingle93["PgSelectSingle[93∈5]<br />ᐸrelational_checklist_itemsᐳ"]:::plan
    PgClassExpression94["PgClassExpression[94∈5]<br />ᐸ__relation...ems__.”id”ᐳ"]:::plan
    Map125["Map[125∈5]<br />ᐸ93:{”0”:0,”1”:1,”2”:2}ᐳ"]:::plan
    PgSelectSingle101["PgSelectSingle[101∈5]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression102["PgClassExpression[102∈5]<br />ᐸ__relation...s__.”type”ᐳ"]:::plan
    PgClassExpression110["PgClassExpression[110∈5]<br />ᐸ__relation...__.”type2”ᐳ"]:::plan
    PgClassExpression118["PgClassExpression[118∈5]<br />ᐸ__relation...”position”ᐳ"]:::plan
    PgClassExpression119["PgClassExpression[119∈5]<br />ᐸ__relation...scription”ᐳ"]:::plan
    PgClassExpression120["PgClassExpression[120∈5]<br />ᐸ__relation...s__.”note”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access9
    __Value3 --> Access10
    Access9 & Access10 --> Object11
    Object11 --> PgSelect8
    PgSelect8 --> __ListTransform12
    PgSelectSingle14 -.-> __ListTransform12
    PgSelect8 -.-> __Item13
    __Item13 --> PgSelectSingle14
    __ListTransform12 ==> __Item15
    __Item15 --> PgSelectSingle16
    PgSelectSingle16 --> PgClassExpression17
    PgSelectSingle16 & PgClassExpression17 --> PgPolymorphic18
    PgSelectSingle16 --> PgClassExpression19
    Object11 & PgClassExpression19 --> PgSelect20
    PgSelect20 --> First24
    First24 --> PgSelectSingle25
    PgSelectSingle25 --> PgClassExpression26
    PgSelectSingle25 --> Map121
    Map121 --> PgSelectSingle33
    PgSelectSingle33 --> PgClassExpression34
    PgSelectSingle33 --> PgClassExpression42
    PgSelectSingle33 --> PgClassExpression50
    PgSelectSingle25 --> PgClassExpression51
    PgSelectSingle25 --> PgClassExpression52
    PgSelectSingle25 --> PgClassExpression53
    Object11 & PgClassExpression19 --> PgSelect55
    PgSelect55 --> First59
    First59 --> PgSelectSingle60
    PgSelectSingle60 --> PgClassExpression61
    PgSelectSingle60 --> Map123
    Map123 --> PgSelectSingle68
    PgSelectSingle68 --> PgClassExpression69
    PgSelectSingle68 --> PgClassExpression77
    PgSelectSingle68 --> PgClassExpression85
    PgSelectSingle60 --> PgClassExpression86
    Object11 & PgClassExpression19 --> PgSelect88
    PgSelect88 --> First92
    First92 --> PgSelectSingle93
    PgSelectSingle93 --> PgClassExpression94
    PgSelectSingle93 --> Map125
    Map125 --> PgSelectSingle101
    PgSelectSingle101 --> PgClassExpression102
    PgSelectSingle101 --> PgClassExpression110
    PgSelectSingle101 --> PgClassExpression118
    PgSelectSingle93 --> PgClassExpression119
    PgSelectSingle93 --> PgClassExpression120

    %% plan-to-path relationships
    P0["~"]
    __Value0 -.-> P0
    P12["ᐳallRelationalCommentablesList"]
    __ListTransform12 -.-> P12
    P14["ᐳallRelationalCommentablesList@12[]"]
    PgSelectSingle14 -.-> P14
    P18["ᐳallRelationalCommentablesList[]"]
    PgPolymorphic18 -.-> P18
    P26["ᐳa…]ᐳid"]
    PgClassExpression26 -.-> P26
    P34["ᐳa…]ᐳtype"]
    PgClassExpression34 -.-> P34
    P42["ᐳa…]ᐳtype2"]
    PgClassExpression42 -.-> P42
    P50["ᐳa…]ᐳposition"]
    PgClassExpression50 -.-> P50
    P51["ᐳa…]ᐳtitle"]
    PgClassExpression51 -.-> P51
    P52["ᐳa…]ᐳdescription"]
    PgClassExpression52 -.-> P52
    P53["ᐳa…]ᐳnote"]
    PgClassExpression53 -.-> P53
    P61["ᐳa…]ᐳid"]
    PgClassExpression61 -.-> P61
    P69["ᐳa…]ᐳtype"]
    PgClassExpression69 -.-> P69
    P77["ᐳa…]ᐳtype2"]
    PgClassExpression77 -.-> P77
    P85["ᐳa…]ᐳposition"]
    PgClassExpression85 -.-> P85
    P86["ᐳa…]ᐳtitle"]
    PgClassExpression86 -.-> P86
    P94["ᐳa…]ᐳid"]
    PgClassExpression94 -.-> P94
    P102["ᐳa…]ᐳtype"]
    PgClassExpression102 -.-> P102
    P110["ᐳa…]ᐳtype2"]
    PgClassExpression110 -.-> P110
    P118["ᐳa…]ᐳposition"]
    PgClassExpression118 -.-> P118
    P119["ᐳa…]ᐳdescription"]
    PgClassExpression119 -.-> P119
    P120["ᐳa…]ᐳnote"]
    PgClassExpression120 -.-> P120

    subgraph "Buckets for queries/interfaces-relational/commentables"
    Bucket0("Bucket 0 (root)<br />~<br />⠀ROOT ᐸ-O- 0<br />⠀⠀allRelationalCommentablesList ᐸ-A- 12"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,PgSelect8,Access9,Access10,Object11,__ListTransform12 bucket0
    Bucket1("Bucket 1 (item13)<br />Deps: 8"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item13,PgSelectSingle14 bucket1
    Bucket2("Bucket 2 (item15)<br />Deps: 12, 11<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀ROOT ᐸ-O- 18"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item15,PgSelectSingle16,PgClassExpression17,PgPolymorphic18,PgClassExpression19,PgSelect20,First24,PgSelect55,First59,PgSelect88,First92 bucket2
    Bucket3("Bucket 3 (polymorphic18[RelationalPost])<br />Deps: 24<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀⠀id ᐸ-L- 26<br />⠀⠀type ᐸ-L- 34<br />⠀⠀type2 ᐸ-L- 42<br />⠀⠀position ᐸ-L- 50<br />⠀⠀title ᐸ-L- 51<br />⠀⠀description ᐸ-L- 52<br />⠀⠀note ᐸ-L- 53"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgSelectSingle25,PgClassExpression26,PgSelectSingle33,PgClassExpression34,PgClassExpression42,PgClassExpression50,PgClassExpression51,PgClassExpression52,PgClassExpression53,Map121 bucket3
    Bucket4("Bucket 4 (polymorphic18[RelationalChecklist])<br />Deps: 59<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀⠀id ᐸ-L- 61<br />⠀⠀type ᐸ-L- 69<br />⠀⠀type2 ᐸ-L- 77<br />⠀⠀position ᐸ-L- 85<br />⠀⠀title ᐸ-L- 86"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelectSingle60,PgClassExpression61,PgSelectSingle68,PgClassExpression69,PgClassExpression77,PgClassExpression85,PgClassExpression86,Map123 bucket4
    Bucket5("Bucket 5 (polymorphic18[RelationalChecklistItem])<br />Deps: 92<br />~ᐳQuery.allRelationalCommentablesList[]<br />⠀⠀id ᐸ-L- 94<br />⠀⠀type ᐸ-L- 102<br />⠀⠀type2 ᐸ-L- 110<br />⠀⠀position ᐸ-L- 118<br />⠀⠀description ᐸ-L- 119<br />⠀⠀note ᐸ-L- 120"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelectSingle93,PgClassExpression94,PgSelectSingle101,PgClassExpression102,PgClassExpression110,PgClassExpression118,PgClassExpression119,PgClassExpression120,Map125 bucket5
    Bucket0 --> Bucket1 & Bucket2
    Bucket2 --> Bucket3 & Bucket4 & Bucket5
    end
